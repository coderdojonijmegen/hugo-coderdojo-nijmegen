<!doctype html><html lang=nl-nl><head><title>Löve2D - Shooter</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=mobile-web-app-capable content="yes"><link rel=stylesheet href=/scss/coderdojo.min.c46ab7ee28a3ff177b5675332ca50048c6463dd37a3006e53d0f10a2c86e8929.css><link rel=icon href=/imgs/icon-512x512.png></head><body><header class=teal-background><menu><span class=menu-toggle id=js-menu-toggle><i></i><i></i><i></i></span><logo><a href=/><img src=/imgs/logo_coderdojo_nijmegen.png alt="logo CoderDojo"></a></logo><ul id=js-menu class=menu><li><a href=/dojos/>dojos</a></li><li><a href=/instructies/>instructies</a></li><li><a href=/meehelpen/>meehelpen</a></li><li><a href=/team/>team</a></li><li><a href=/stichting/>stichting</a></li></ul></menu></header><main><breadcrumbs><ul><li><a href=/>home</a></li><li>/ <a href=/instructies>Instructies</a></li><li>/ <a href=/instructies/love2d-shooter>Love2d shooter</a></li></ul></breadcrumbs><h1>Löve2D - Shooter</h1><article class=instructie><aside class=toc><header><h2>Inhoud</h2></header><nav id=TableOfContents><ul><li><a href=#wat-leer-je>Wat leer je?</a></li><li><a href=#benodigdheden>Benodigdheden</a><ul><li><a href=#installatie-löve>Installatie Löve</a></li></ul></li><li><a href=#stappen>Stappen</a><ul><li><a href=#stap-0-installatie-voorbereidde-code>Stap 0: installatie voorbereidde code</a></li><li><a href=#stap-1-teken-het-vliegtuig-van-de-speler>Stap 1: teken het vliegtuig van de speler</a></li><li><a href=#stap-2-eigenschappen-van-de-speler>Stap 2: eigenschappen van de speler</a></li><li><a href=#stap-3-de-speler-bewegen>Stap 3: de speler bewegen</a></li><li><a href=#stap-4-de-vijand>Stap 4: de vijand</a></li><li><a href=#stap-5-meerdere-vijanden>Stap 5: meerdere vijanden</a></li><li><a href=#stap-6-de-vijand-ontwijken>Stap 6: de vijand ontwijken</a></li><li><a href=#stap-7-schieten>Stap 7: schieten</a></li><li><a href=#stap-8-raken-en-scoren>Stap 8: raken en scoren</a></li><li><a href=#stap-9-opnieuw-starten>Stap 9: opnieuw starten</a></li><li><a href=#voorbereide-functies>Voorbereide functies</a></li><li><a href=#voorbeeld-code>Voorbeeld code</a></li></ul></li><li><a href=#conclusie>Conclusie</a></li><li><a href=#vervolg>Vervolg</a></li></ul></nav></aside><p>We gaan met 2D game framework Löve2D een shooter bouwen.</p><p>We gaan een eenvoudige shooter maken. Deze instructie is een vertaling en bewerking van een <a href=http://osmstudios.com/tutorials/your-first-love2d-game-in-200-lines-part-1-of-3>tutorial</a> gemaakt door >_OSMSTUDIOS.</p><h2 id=wat-leer-je>Wat leer je?</h2><p>Tijdens de Dojo&rsquo;s over Scratch hebben jullie kennis gemaakt met variabelen en functies (blokken). Daar gaan we mee verder.</p><p>In Scratch kun je met drag-and-drop variabelen en functies combineren tot een programma, maar bij de meeste
programmeertalen wordt het programma in tekst geschreven. Dat is ook het geval bij Löve. We gaan dus typen.</p><p>Om het geen type sessie te laten zijn, zijn een aantal functies, net als bij Scratch, al voor jullie gemaakt.
Je hoeft ze dus niet helemaal zelf meer te maken. Je hoeft ze alleen maar te gebruiken.</p><h2 id=benodigdheden>Benodigdheden</h2><p>Om deze instructie te kunnen volgen, moet je Löve en een goede editor geïnstalleerd hebben.
Verder moet je wat code downloaden om verder op te bouwen, maar dit wordt in stap 0 uitgelegd.</p><h3 id=installatie-löve>Installatie Löve</h3><p>Hopelijk heb je de installatie al voorbereid na het ontvangen van de uitnodiging voor deze Dojo. Als dat zo is, kun je
dit hoofdstukje overslaan en doorgaan naar Stap 1.</p><h4 id=windows>Windows</h4><p>Löve is op Windows gemakkelijk te installeren via één van de installers. Als alternatief kun je kiezen voor één van de
zipbestanden en deze op een gewenste locatie unzippen. Maak het jezelf gemakkelijk door Löve op een eenvoudig te
onthouden plek te installeren, bijvoorbeeld in de map</p><pre><code>c:\love\
</code></pre><p>Zie de <a href=https://love2d.org/#download>Löve download pagina</a> voor de installatie bestanden.
Als je twijfelt tussen de 32- of 64-bits versie, kun je voor de zekerheid kiezen voor 32-bits versie of gewoon even
<a href=https://support.microsoft.com/nl-nl/help/13443/windows-which-operating-system>checken</a> welke versie je hebt.</p><h4 id=mac>Mac</h4><p><a href=https://love2d.org/%23download>Download</a> het zip bestand voor Mac en unzip het op de gewenste locatie.</p><h4 id=linux>Linux</h4><p>Voor Ubuntu kun je kiezen voor het toevoegen van de <a href=https://launchpad.net/~bartbes/%2Barchive/ubuntu/love-stable>Löve PPA</a>
of voor de installatie van één van de .deb bestanden.</p><h4 id=tekst-editor>Tekst editor</h4><p>Als je gaat programmeren is het handig om een editor te installeren met meer mogelijkheden dan &lsquo;kladblok&rsquo;.
<a href=https://www.sublimetext.com/3>Sublime Text</a> snapt Lua en dus Löve. Als alternatief kun je kiezen voor
<a href=https://notepad-plus-plus.org/download/>Notepad++</a>.</p><h2 id=stappen>Stappen</h2><p>TIP: de onderstaande stukken code hoef je niet over te typen. Je kunt ze natuurlijk gewoon copy-pasten in je editor.</p><h3 id=stap-0-installatie-voorbereidde-code>Stap 0: installatie voorbereidde code</h3><p>Download the code van GitHub: <a href=https://github.com/coderdojonijmegen/love2d-shooter/archive/master.zip>Löve 2D shooter code</a>
De zip-file bevat een <code>src/</code> folder. Kopieer de inhoud daarvan naar <code>c:\games\shooter</code>
Om de voorbereidde code uit te voeren, druk je op de Windows knop en typ je &lsquo;cmd&rsquo;. Je krijgt dan een zwart venster.
Typ dan cd <code>c:\games\shooter</code> om naar de folder te gaan waar je de code hebt neergezet. Typ tenslotte <code>c:\love\love.exe .\</code>
om het programma te starten. Als alles goed gaat, krijg je een zwart venster.</p><h3 id=stap-1-teken-het-vliegtuig-van-de-speler>Stap 1: teken het vliegtuig van de speler</h3><p>In deze stap doen we het volgende:</p><p>We laden het plaatje van het vliegtuig van de speler
Tekenen het plaatje op het scherm
Open <code>main.lua</code> in je tekst editor en type het volgende:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- variabele om het plaatje in op te slaan</span>
	spelersVliegtuig <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>nil</span>
	
	<span style=color:#000;font-weight:700>function</span> <span style=color:#458;font-weight:700>love</span>.<span style=color:#900;font-weight:700>load</span>(arg)
	  <span style=color:#998;font-style:italic>-- laadt het plaatje in de variabele</span>
	  spelersVliegtuig <span style=color:#000;font-weight:700>=</span> love.graphics.newImage(<span style=color:#d14>&#39;plaatjes/spelersVliegtuig.png&#39;</span>)
	<span style=color:#000;font-weight:700>end</span></code></pre></div><p>En vervolgens om op het scherm te tekenen:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#000;font-weight:700>function</span> <span style=color:#458;font-weight:700>love</span>.<span style=color:#900;font-weight:700>draw</span>(dt)
	  <span style=color:#998;font-style:italic>-- teken het plaatje op het scherm</span>
	  love.graphics.draw(spelersVliegtuig, <span style=color:#099>100</span>, <span style=color:#099>100</span>)
	<span style=color:#000;font-weight:700>end</span></code></pre></div><p>Start je programmaatje en zie het resultaat:</p><p><img src=images/image9.png alt="scherm met vliegtuig"></p><div class=verdieping><h3 id=x-en-y-as>x en y as</h3><p><img src=images/image6.png alt="assen stelsel in Löve2D"></p><p>In de code hebben we bij het aanroepen van functie <code>love.graphics.draw</code> twee keer het getal 100 gebruikt. Deze worden
gebruikt om de positie van het plaatje in het scherm te bepalen. Daarbij is positie 0,0 links bovenin. Bij 100,100 is
het plaatje dus 100 stappen naar beneden en 100 naar rechts verschoven ten opzichte van 0,0.
Voor de horizontale positie wordt vaak variabele naam x gebruikt en voor de verticale positie y.</p><p>In Scratch komen x en y waarden voor de plaats van een Sprite ook terug. Hieronder staat Scratch op x = 31 en y = -36</p><p><img src=images/image8.png alt="x en y in Scratch"></p></div><h3 id=stap-2-eigenschappen-van-de-speler>Stap 2: eigenschappen van de speler</h3><p>Het vliegtuig van de speler staat nu nog stil op positie 100,100, maar zal natuurlijk van links naar rechts gaan bewegen
als we wat verder zijn. Je zou kunnen zeggen dat de speler een aantal eigenschappen heeft:</p><ul><li>het plaatje</li><li>de positie</li></ul><p>Om die informatie bij elkaar te houden, vervangen we variabele <code>spelersVliegtuig</code> door een nieuwe variabele waarin
meerdere eigenschappen opgeslagen kunnen worden:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- variabele om eigenschappen van de speler in op te slaan</span>
	speler <span style=color:#000;font-weight:700>=</span> { x <span style=color:#000;font-weight:700>=</span> <span style=color:#099>200</span>, y <span style=color:#000;font-weight:700>=</span> <span style=color:#099>560</span>, plaatje <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>nil</span> }
	
	<span style=color:#000;font-weight:700>function</span> <span style=color:#458;font-weight:700>love</span>.<span style=color:#900;font-weight:700>load</span>(arg)
	  <span style=color:#998;font-style:italic>-- laadt het plaatje in eigenschap plaatje van de variabele speler</span>
	  speler.plaatje <span style=color:#000;font-weight:700>=</span> love.graphics.newImage(<span style=color:#d14>&#39;plaatjes/spelersVliegtuig.png&#39;</span>)
	<span style=color:#000;font-weight:700>end</span></code></pre></div><p>Het tekenen van het plaatje moet ook aangepast worden, zodat de nieuwe variabele met spelers eigenschappen gebruikt worden:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#000;font-weight:700>function</span> <span style=color:#458;font-weight:700>love</span>.<span style=color:#900;font-weight:700>draw</span>(dt)
	  <span style=color:#998;font-style:italic>-- teken het plaatje op het scherm</span>
	  love.graphics.draw(speler.plaatje, speler.x, speler.y)
	<span style=color:#000;font-weight:700>end</span></code></pre></div><p>Start opnieuw je programma en zie dat het vliegtuig nu onder in het venster staat. De wijzigingen die je hebt gemaakt
zijn een voorbereiding om plaatje te kunnen laten bewegen.</p><h3 id=stap-3-de-speler-bewegen>Stap 3: de speler bewegen</h3><p>Je programma toont nu alleen een stilstaand plaatje. Dat is natuurlijk niet erg interessant. In deze stap ga je het plaatje laten bewegen.</p><h4 id=bewegen-met-pijltjes>Bewegen met pijltjes</h4><p>Om het plaatje te horizontaal te laten bewegen, moet de <code>speler.x</code> eigenschap worden aangepast. De waarde van <code>speler.x</code>
moet kleiner worden om naar links te bewegen en groter om naar rechts te bewegen. Je kunt dit ook eenvoudig uitproberen
door de waarde 200 in de code groter of kleiner te maken en je programma te starten.</p><p>Om het plaatje te laten bewegen terwijl het programma draait, moet het programma gaan reageren op toetsen van je
toetsenbord. De pijl naar links zorgt voor een beweging naar links en de pijl naar rechts voor een beweging naar rechts:</p><p><img src=images/image16.png alt="Scratch voorbeeld pijl links en rechts"></p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#000;font-weight:700>function</span> <span style=color:#458;font-weight:700>love</span>.<span style=color:#900;font-weight:700>update</span>(dt)
	  <span style=color:#998;font-style:italic>-- als pijltje naar links wordt ingedrukt</span>
	  <span style=color:#000;font-weight:700>if</span> love.keyboard.isDown(<span style=color:#d14>&#39;left&#39;</span>) <span style=color:#000;font-weight:700>then</span>
	
	    <span style=color:#998;font-style:italic>-- dan doe een stap naar links</span>
	    speler.x <span style=color:#000;font-weight:700>=</span> speler.x <span style=color:#000;font-weight:700>-</span> <span style=color:#099>1</span>
	
	  <span style=color:#998;font-style:italic>-- als pijltje naar rechts wordt ingedrukt</span>
	  <span style=color:#000;font-weight:700>elseif</span> love.keyboard.isDown(<span style=color:#d14>&#39;right&#39;</span>) <span style=color:#000;font-weight:700>then</span>
	
	    <span style=color:#998;font-style:italic>-- dan doe een stap naar rechts</span>
	    speler.x <span style=color:#000;font-weight:700>=</span> speler.x <span style=color:#000;font-weight:700>+</span> <span style=color:#099>1</span>
	  <span style=color:#000;font-weight:700>end</span>
	<span style=color:#000;font-weight:700>end</span></code></pre></div><p>Als je voor het eerst naar programmeercode kijkt ziet het bovenstaande er ingewikkeld uit, maar vergelijk het eens met
het bewegen met pijltjes in Scratch. <code>love.update(dt)</code> wordt steeds opnieuw uitgevoerd en is daarom vergelijkbaar met
de &lsquo;herhaal&rsquo; in Scratch en &lsquo;if &mldr; then&rsquo; is gelijk aan &lsquo;als &mldr; dan&rsquo; in Scratch.</p><p>Als je de programmeercode hebt ingevoerd, kun je het programma starten om uit te proberen of het werkt.</p><p>Probeer ook eens een andere stapgrootte dan 1. Doet dat wat je ervan verwacht? Wat gebeurt er als je er een negatief getal van maakt?
Kun je de code aanpassen, zodat je ook naar boven en beneden kunt bewegen (gebruik toetsen &lsquo;up&rsquo; voor naar boven en &lsquo;down&rsquo; voor naar beneden)?
Wat gebeurt er als je bijvoorbeeld het pijltje naar rechts lang ingedrukt houdt?</p><h4 id=stoppen-bij-de-rand>Stoppen bij de rand</h4><p>Om te voorkomen dat het plaatje onzichtbaar wordt, moeten we voorkomen dat het verder beweegt als het aan de randen
van het venster komt. Aan de linker kant is dat makkelijk: beweeg niet verder als <code>speler.x</code> gelijk is aan 0.
In code ziet dat er als volgt uit:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- als pijltje naar links ingedrukt</span>
	<span style=color:#000;font-weight:700>if</span> love.keyboard.isDown(<span style=color:#d14>&#39;left&#39;</span>) <span style=color:#000;font-weight:700>then</span>
	
	  <span style=color:#998;font-style:italic>-- en linker rand is nog niet bereikt</span>
	  <span style=color:#000;font-weight:700>if</span> speler.x <span style=color:#000;font-weight:700>&gt;</span> <span style=color:#099>0</span> <span style=color:#000;font-weight:700>then</span>
	
	    <span style=color:#998;font-style:italic>-- dan doe een stap naar links</span>
	    speler.x <span style=color:#000;font-weight:700>=</span> speler.x <span style=color:#000;font-weight:700>-</span> <span style=color:#099>1</span>
	
	  <span style=color:#000;font-weight:700>end</span></code></pre></div><p>Aan de rechter zijde is dat lastiger. Daar hangt de maximale &lsquo;x&rsquo; af van de breedte van het venster. De maximale waarde
voor x is gelijk aan de breedte van het venster, of <code>xRechterRand()</code>:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- als pijltje naar rechts ingedrukt</span>
	<span style=color:#000;font-weight:700>elseif</span> love.keyboard.isDown(<span style=color:#d14>&#39;right&#39;</span>) <span style=color:#000;font-weight:700>then</span>
	
	  <span style=color:#998;font-style:italic>-- en de rechter rand is nog niet bereikt</span>
	  <span style=color:#000;font-weight:700>if</span> speler.x <span style=color:#000;font-weight:700>&lt;</span> xRechterRand() <span style=color:#000;font-weight:700>then</span>
	
	    <span style=color:#998;font-style:italic>-- dan doe een stap naar rechts</span>
	    speler.x <span style=color:#000;font-weight:700>=</span> speler.x <span style=color:#000;font-weight:700>+</span> <span style=color:#099>1</span>
	
	  <span style=color:#000;font-weight:700>end</span>
	<span style=color:#000;font-weight:700>end</span></code></pre></div><p>Pas de code die je eerder bij stap 3 (bewegen met pijltjes) hebt geschreven aan, zodat je stopt bij de rand. Controleer
ook of het plaatje nu niet aan de rechterkant verdwijnt. Voor de duidelijkheid hebben we de Scratch code ook
aangepast en bijgevoegd (zie plaatje rechts).</p><p><img src=images/image14.png alt="Scratch voorbeeld maximaal rechts"></p><h3 id=stap-4-de-vijand>Stap 4: de vijand</h3><p>Het spel draait natuurlijk niet alleen om het heen en weer bewegen van een vliegtuigje.
Er is ook een vijand. In deze stap gaan we vijanden maken.</p><p>We beginnen met het tekenen van één vijand. Daarvoor voegen we één regel toe (bijna bovenaan je code) en we voegen
een regel code toe aan de <code>love.load()</code> en <code>love.draw()</code> functies:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- variabelen om eigenschappen van de speler en vijand in op te slaan</span>
	speler <span style=color:#000;font-weight:700>=</span> { x <span style=color:#000;font-weight:700>=</span> <span style=color:#099>200</span>, y <span style=color:#000;font-weight:700>=</span> <span style=color:#099>560</span>, plaatje <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>nil</span> }
	vijand <span style=color:#000;font-weight:700>=</span> { x <span style=color:#000;font-weight:700>=</span> <span style=color:#099>200</span>, y <span style=color:#000;font-weight:700>=</span> <span style=color:#099>0</span>, plaatje <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>nil</span> }
	
	<span style=color:#000;font-weight:700>function</span> <span style=color:#458;font-weight:700>love</span>.<span style=color:#900;font-weight:700>load</span>(arg)

	  <span style=color:#998;font-style:italic>-- laadt het plaatje in eigenschap plaatje van de variabele speler</span>
	  speler.plaatje <span style=color:#000;font-weight:700>=</span> love.graphics.newImage(<span style=color:#d14>&#39;plaatjes/spelersVliegtuig.png&#39;</span>)
	  vijand.plaatje <span style=color:#000;font-weight:700>=</span> love.graphics.newImage(<span style=color:#d14>&#39;plaatjes/vijandsVliegtuig.png&#39;</span>)
	<span style=color:#000;font-weight:700>end</span>
	
	<span style=color:#000;font-weight:700>function</span> <span style=color:#458;font-weight:700>love</span>.<span style=color:#900;font-weight:700>draw</span>(dt)

	  <span style=color:#998;font-style:italic>-- teken het plaatje op het scherm</span>
	  love.graphics.draw(speler.plaatje, speler.x, speler.y)
	  love.graphics.draw(vijand.plaatje, vijand.x, vijand.y)
	<span style=color:#000;font-weight:700>end</span></code></pre></div><p>Probeer bovenstaande code uit.</p><p>Er is nu één vijand en deze staat recht tegenover de speler. Een stilstaande vijand is niet zo interessant, dus we laten
&rsquo;m naar de speler bewegen. Dat kan vrij eenvoudig door het volgende aan de code toe te voegen aan je <code>love.update(dt)</code> functie:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#000;font-weight:700>function</span> <span style=color:#458;font-weight:700>love</span>.<span style=color:#900;font-weight:700>update</span>(dt)

	  <span style=color:#998;font-style:italic>-- laat de vijand een stapje naar beneden doen </span>
	  vijand.y <span style=color:#000;font-weight:700>=</span> vijand.y <span style=color:#000;font-weight:700>+</span> <span style=color:#099>1</span></code></pre></div><p>Bovenstaande code werkt hetzelfde als het verplaatsen van de speler. Nu bewegen we alleen wel verticaal (van boven naar
beneden). Daardoor moeten we y in plaats van x veranderen. De positie van de vijand wordt steeds met 1 stapje naar
beneden verzet. Zo beweegt de vijand naar de speler toe.</p><p>Om het plaatje van buiten het venster tevoorschijn te laten komen, moet de y positie aangepast worden naar -100.
Pas de code bovenin je script aan door y = 0 te veranderen naar y = -100:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	vijand <span style=color:#000;font-weight:700>=</span> { x <span style=color:#000;font-weight:700>=</span> <span style=color:#099>200</span>, y <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>-</span><span style=color:#099>100</span>, plaatje <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>nil</span> }</code></pre></div><p>Onder aan het scherm vliegt de vijand het venster uit en is dan verdwenen. Het is natuurlijk leuker als er aan de
bovenkant een nieuwe vijand verschijnt. Daarvoor moet je, net als bij het bewegend maken van de vijand,
onderstaande code toevoegen aan <code>love.update(dt)</code>:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- als de vijand de onderrand heeft bereikt</span>
	<span style=color:#000;font-weight:700>if</span> vijand.y <span style=color:#000;font-weight:700>&gt;</span> yOnderRand() <span style=color:#000;font-weight:700>then</span>
	
	  <span style=color:#998;font-style:italic>-- verplaats het dan uit het zicht boven het venster</span>
	  vijand.y <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>-</span><span style=color:#099>100</span>
	
	<span style=color:#000;font-weight:700>end</span></code></pre></div><p>Om je te helpen met het begrijpen van de code: het verplaatsen van de vijand in Scratch zou er ongeveer zo uitzien:</p><p><img src=images/image18.png alt="Scratch verplaatsen vijand"></p><p>Om het nog interessanter te maken, zou het leuk zijn als de vijand niet steeds op dezelfde plaats van boven naar
beneden beweegt. De waarde van <code>vijand.x</code> (horizontale positie) zou iedere keer anders moeten zijn.
Gebruik daarvoor de functie <code>xWillekeurig()</code>:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- als de vijand de onderrand heeft bereikt</span>
	<span style=color:#000;font-weight:700>if</span> vijand.y <span style=color:#000;font-weight:700>&gt;</span> yOnderRand() <span style=color:#000;font-weight:700>then</span>
	
	  <span style=color:#998;font-style:italic>-- verplaats het dan uit het zicht boven het venster</span>
	  vijand.y <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>-</span><span style=color:#099>100</span>
	
	  <span style=color:#998;font-style:italic>-- en zet de horizontale positie naar een willekeurige waarde</span>
	  vijand.x <span style=color:#000;font-weight:700>=</span> xWillekeurig()
	
	<span style=color:#000;font-weight:700>end</span></code></pre></div><p>Wat je in Scratch zo zou doen:</p><p><img src=images/image13.png alt="Scratch random start positie vijand"></p><h3 id=stap-5-meerdere-vijanden>Stap 5: meerdere vijanden</h3><p>We hebben nu een enkele vijand. Die is natuurlijk makkelijk te ontwijken. Spannender wordt het, als we er meerdere hebben.
Daarvoor moeten we het één en ander aanpassen, de code die je eerder hebt geschreven voor één vijand, gaan we vervangen
met code voor meerdere vijanden. Je moet hier en daar dus code verwijderen!</p><p>Allereerst hebben we een lijst met vijanden nodig, die voegen we bovenaan de code toe, bij &lsquo;speler&rsquo;.
Variabelen staan vaak bovenaan in code:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- variabelen om eigenschappen van de speler in op te slaan</span>
	speler <span style=color:#000;font-weight:700>=</span> { x <span style=color:#000;font-weight:700>=</span> <span style=color:#099>200</span>, y <span style=color:#000;font-weight:700>=</span> <span style=color:#099>560</span>, plaatje <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>nil</span> }
	
	<span style=color:#998;font-style:italic>-- lijst om vijanden in op te slaan</span>
	vijanden <span style=color:#000;font-weight:700>=</span> {}</code></pre></div><p>Een andere variabele die we nodig hebben is het plaatje van de vijand. Eerder deden we dat in de functie <code>love.draw(dt)</code>
met <code>speler.plaatje</code>. Die regel mag nu verwijderd worden en in plaats daarvan zetten we bij de variabelen
&lsquo;speler&rsquo; en &lsquo;vijanden&rsquo; ook het plaatje voor de vijand:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- laad het plaatje van de vijand</span>
	vijandPlaatje <span style=color:#000;font-weight:700>=</span> love.graphics.newImage(<span style=color:#d14>&#39;plaatjes/vijandsVliegtuig.png&#39;</span>)</code></pre></div><p>De vijanden moeten ook getekend worden, zorg ervoor dat jouw <code>love.draw(dt)</code> functie eruit ziet zoals hieronder:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#000;font-weight:700>function</span> <span style=color:#458;font-weight:700>love</span>.<span style=color:#900;font-weight:700>draw</span>(dt)
	
	  <span style=color:#998;font-style:italic>-- teken het plaatje op het scherm</span>
	  love.graphics.draw(speler.plaatje, speler.x, speler.y)
	
	  <span style=color:#998;font-style:italic>-- teken de vijanden in de lijst</span>
	  tekenVijanden(vijanden)
	
	<span style=color:#000;font-weight:700>end</span></code></pre></div><p>Er worden alleen vijanden getekend die bestaan, daarom moeten vijanden ook aangemaakt worden:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#000;font-weight:700>function</span> <span style=color:#458;font-weight:700>love</span>.<span style=color:#900;font-weight:700>update</span>(dt)
	
	  maakNieuweVijand(vijanden)</code></pre></div><p>In de vorige stap hebben we de vijand laten bewegen. Deze code moeten we nu voor iedere vijand in de lijst uitvoeren:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#000;font-weight:700>function</span> <span style=color:#458;font-weight:700>love</span>.<span style=color:#900;font-weight:700>update</span>(dt)
	
	  maakNieuweVijand(vijanden) 
	
	  <span style=color:#998;font-style:italic>-- voor elke vijand in de lijst  </span>
	  <span style=color:#000;font-weight:700>for</span> index, vijand <span style=color:#000;font-weight:700>in</span> ipairs(vijanden) <span style=color:#000;font-weight:700>do</span>
	
	    <span style=color:#998;font-style:italic>-- laat de vijand een stapje naar beneden doen  </span>
	    vijand.y <span style=color:#000;font-weight:700>=</span> vijand.y <span style=color:#000;font-weight:700>+</span> <span style=color:#099>2</span>
	
	    <span style=color:#998;font-style:italic>-- als de vijand de onderrand heeft bereikt</span>
	    <span style=color:#000;font-weight:700>if</span> vijand.y <span style=color:#000;font-weight:700>&gt;</span> yOnderRand() <span style=color:#000;font-weight:700>then</span>
	
	      <span style=color:#998;font-style:italic>-- verwijder de vijand</span>
	      table.remove(vijanden, index)
	
	    <span style=color:#000;font-weight:700>end</span>
	  <span style=color:#000;font-weight:700>end</span></code></pre></div><p>Het maken en verwijderen van vijanden zoals we dat hierboven doen is in Scratch heel lastig. We geven daarom geen
voorbeeld van het bovenstaande in Scratch. Waar het kan doen we dat wel.</p><p>Voer het programma uit. Als het goed is ziet het eruit als onderstaande plaatje:</p><p><img src=images/image3.png alt="scherm met vijandelijke vliegtuigen"></p><h3 id=stap-6-de-vijand-ontwijken>Stap 6: de vijand ontwijken</h3><p>Als de speler een vijand raakt, is het spel afgelopen. Om te zien of de speler een vijand geraakt heeft, hebben we
functie <code>spelerHeeftVijandGeraakt()</code>.</p><p>Als het resultaat van de functie waar (true) is, dan moet het spel gestopt worden.</p><p>Voeg daarvoor de volgende code toe aan functie <code>love.update(dt)</code>:</p><p><img src=images/image2.png alt="Scratch spel is afgelopen"></p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- als de speler een vijand geraakt heeft</span>
	<span style=color:#000;font-weight:700>if</span> spelerHeeftVijandGeraakt() <span style=color:#000;font-weight:700>then</span>
	
	  <span style=color:#998;font-style:italic>-- is het spel afgelopen</span>
	  spelIsAfgelopen <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>true</span>
	
	<span style=color:#000;font-weight:700>end</span></code></pre></div><p>In variabele <code>spelIsAfgelopen</code> wordt bijgehouden of het spel nog loopt of al is afgelopen. Als het is afgelopen,
wordt de speler niet langer getekend. Pas daarvoor functie <code>love.draw(dt)</code> aan door het tekenen van de speler
binnen een if statement te plaatsen:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#000;font-weight:700>function</span> <span style=color:#458;font-weight:700>love</span>.<span style=color:#900;font-weight:700>draw</span>(dt)
	
	  <span style=color:#998;font-style:italic>-- als het spel nog niet is afgelopen</span>
	  <span style=color:#000;font-weight:700>if</span> spelIsAfgelopen <span style=color:#000;font-weight:700>==</span> <span style=color:#000;font-weight:700>false</span> <span style=color:#000;font-weight:700>then</span>
	
	    <span style=color:#998;font-style:italic>-- teken het plaatje op het scherm</span>
	    love.graphics.draw(speler.plaatje, speler.x, speler.y)
	
	  <span style=color:#000;font-weight:700>end</span></code></pre></div><p>In Scratch zou het er zo uitzien:</p><p><img src=images/image11.png alt="Scratch verschijn"></p><p>Vergeet niet om bovenaan het bestand de variabele toe te voegen:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	spelIsAfgelopen <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>false</span></code></pre></div><p>Als je nu het spel speelt, wordt het spelersvliegtuig niet meer getekend als je een vijand hebt geraakt.</p><h3 id=stap-7-schieten>Stap 7: schieten</h3><p>De stap schieten lijkt op een combinatie van stappen 4 en 5..</p><p>Er moet een lijst worden toegevoegd voor de kogels:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- variabelen om eigenschappen van de speler in op te slaan</span>
	speler <span style=color:#000;font-weight:700>=</span> { x <span style=color:#000;font-weight:700>=</span> spelerX, y <span style=color:#000;font-weight:700>=</span> spelerY, plaatje <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>nil</span> }
	
	<span style=color:#998;font-style:italic>-- lijst om vijanden in op te slaan</span>
	vijanden <span style=color:#000;font-weight:700>=</span> {}
	
	<span style=color:#998;font-style:italic>-- lijst om kogels in op te slaan</span>
	kogels <span style=color:#000;font-weight:700>=</span> {}</code></pre></div><p>Het plaatje van de kogel moet worden geladen:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- laad het plaatje van de vijand</span>
	vijandPlaatje <span style=color:#000;font-weight:700>=</span> love.graphics.newImage(<span style=color:#d14>&#39;plaatjes/vijandsVliegtuig.png&#39;</span>)
	
	<span style=color:#998;font-style:italic>-- laad het plaatje van de kogel</span>
	kogelPlaatje <span style=color:#000;font-weight:700>=</span> love.graphics.newImage(<span style=color:#d14>&#39;plaatjes/kogel.png&#39;</span>)</code></pre></div><p>En het plaatje moet worden getekend, dat doe je in de <code>love.draw(dt)</code> functie:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- teken de kogels in de lijst</span>
	tekenKogels(kogels)</code></pre></div><p>In tegenstelling tot de vijanden, worden nieuwe kogels alleen aangemaakt als de speler de spatiebalk indrukt.
In de <code>love.update(dt)</code> functie voeg je het volgende toe:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>    <span style=color:#000;font-weight:700>if</span> spelIsAfgelopen <span style=color:#000;font-weight:700>==</span> <span style=color:#000;font-weight:700>false</span> <span style=color:#000;font-weight:700>then</span>

	<span style=color:#998;font-style:italic>-- als de spatiebalk wordt ingedrukt</span>
	<span style=color:#000;font-weight:700>if</span> love.keyboard.isDown(<span style=color:#d14>&#39;space&#39;</span>) <span style=color:#000;font-weight:700>then</span>
	
	  <span style=color:#998;font-style:italic>-- schiet dan</span>
	  maakNieuweKogel(kogels, speler)

	<span style=color:#000;font-weight:700>end</span>

        maakNieuweVijand(vijanden)  </code></pre></div><p>Als je de code tot nu toe uitprobeert, krijg je wel een kogels te zien, maar die bewegen niet, het ziet eruit als het plaatje hieronder.</p><p><img src=images/image12.png alt="scherm met vijandelijke vliegtuigen en kogels"></p><p>Aan de <code>love.update(dt)</code> functie moet nog wat extra code worden toegevoegd om de kogels te laten bewegen.
Elke kogel in de lijst laten we telkens vier stappen omhoog gaan en als een kogel uit beeld verdwijnt,
halen we de kogel ook uit de lijst:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>    <span style=color:#000;font-weight:700>if</span> spelIsAfgelopen <span style=color:#000;font-weight:700>==</span> <span style=color:#000;font-weight:700>false</span> <span style=color:#000;font-weight:700>then</span>
        <span style=color:#998;font-style:italic>-- als de spatiebalk wordt ingedrukt</span>
        <span style=color:#000;font-weight:700>if</span> love.keyboard.isDown(<span style=color:#d14>&#39;space&#39;</span>) <span style=color:#000;font-weight:700>then</span>
            <span style=color:#998;font-style:italic>-- schiet dan</span>
            maakNieuweKogel(kogels, speler)
        <span style=color:#000;font-weight:700>end</span>

        <span style=color:#998;font-style:italic>-- voor elke kogel in de lijst</span>
        <span style=color:#000;font-weight:700>for</span> index, kogel <span style=color:#000;font-weight:700>in</span> ipairs(kogels) <span style=color:#000;font-weight:700>do</span>

            <span style=color:#998;font-style:italic>-- beweeg de kogel naar boven</span>
            kogel.y <span style=color:#000;font-weight:700>=</span> kogel.y <span style=color:#000;font-weight:700>-</span> (<span style=color:#099>2</span> <span style=color:#000;font-weight:700>*</span> stapGrootte)

            <span style=color:#998;font-style:italic>-- als de kogel de bovenrand heeft bereikt</span>
            <span style=color:#000;font-weight:700>if</span> kogel.y <span style=color:#000;font-weight:700>&lt;</span> <span style=color:#000;font-weight:700>-</span><span style=color:#099>20</span> <span style=color:#000;font-weight:700>then</span>
                <span style=color:#998;font-style:italic>-- verwijder het uit de lijst</span>
                table.remove(kogels, index)
            <span style=color:#000;font-weight:700>end</span>
        <span style=color:#000;font-weight:700>end</span>

        maakNieuweVijand(vijanden)  </code></pre></div><p>Dat ziet er beter uit!</p><p><img src=images/image15.png alt="scherm met vijandelijke vliegtuigen en bewegende kogels"></p><h3 id=stap-8-raken-en-scoren>Stap 8: raken en scoren</h3><p>De vijanden vliegen, je kunt je vliegtuig richten en je kunt schieten. Maar je schoten raken nog niets en de
vijanden vliegen door. Daar gaan we in deze stap wat aan doen.</p><p>Functie <code>kogelHeeftVijandGeraakt()</code> laat ons weten of een kogel een vijand geraakt heeft.
Ook verwijderd deze functie de geraakte vijand en de kogel:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- als de kogel een vijand geraakt heeft</span>
	<span style=color:#000;font-weight:700>if</span> kogelHeeftVijandGeraakt() <span style=color:#000;font-weight:700>then</span>
	
	  <span style=color:#998;font-style:italic>-- heb je een punt gescoord</span>
	  score <span style=color:#000;font-weight:700>=</span> score <span style=color:#000;font-weight:700>+</span> <span style=color:#099>1</span>
	
	<span style=color:#000;font-weight:700>end</span></code></pre></div><p>Voeg bovenstaande code toe aan <code>love.update(dt)</code>. Om de score in op te slaan, moet je ook nog een variabele
aanmaken boven aan het bestand:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	score <span style=color:#000;font-weight:700>=</span> <span style=color:#099>0</span></code></pre></div><p>In Scratch ziet het er zo uit:</p><p><img src=images/image20.png alt="Scratch werk score bij"></p><p>We willen natuurlijk de score kunnen zien, dus moeten we die in het scherm afdrukken.
Voeg daarvoor in <code>love.draw(dt)</code> het volgende toe:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>	<span style=color:#998;font-style:italic>-- zet de tekstkleur op wit</span>
	love.graphics.setColor(<span style=color:#099>255</span>, <span style=color:#099>255</span>, <span style=color:#099>255</span>)
	
	<span style=color:#998;font-style:italic>-- en druk de score af</span>
	love.graphics.print(<span style=color:#d14>&#34;SCORE: &#34;</span> <span style=color:#000;font-weight:700>..</span> tostring(score), <span style=color:#099>400</span>, <span style=color:#099>10</span>)</code></pre></div><h3 id=stap-9-opnieuw-starten>Stap 9: opnieuw starten</h3><p>Mocht je een vijand aanraken, dan is het spel afgelopen, maar dan wil je natuurlijk wel opnieuw kunnen beginnen.
Daarvoor gaan we code toevoegen aan <code>love.update(dt)</code>:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua>  <span style=color:#998;font-style:italic>-- als de o van opnieuw wordt ingedrukt</span>
  <span style=color:#000;font-weight:700>if</span> love.keyboard.isDown(<span style=color:#d14>&#39;o&#39;</span>) <span style=color:#000;font-weight:700>then</span>

    <span style=color:#998;font-style:italic>-- wordt het spel opnieuw gestart</span>
    kogels <span style=color:#000;font-weight:700>=</span> {}
    vijanden <span style=color:#000;font-weight:700>=</span> {}
    score <span style=color:#000;font-weight:700>=</span> <span style=color:#099>0</span>
    spelIsAfgelopen <span style=color:#000;font-weight:700>=</span> <span style=color:#000;font-weight:700>false</span>

  <span style=color:#000;font-weight:700>end</span></code></pre></div><p>Als je op &lsquo;o&rsquo; drukt begint je spel opnieuw. Het spel is nu klaar!</p><h3 id=voorbereide-functies>Voorbereide functies</h3><p>Bij het maken van het spelletje heb je gebruik gemaakt van een aantal voorbereide functies. Als je je nu afvraagt hoe
die functies zijn gemaakt, dan kun je eens kijken in bestand <a href=src/functies.lua>functies.lua</a>.</p><h3 id=voorbeeld-code>Voorbeeld code</h3><p>Mocht je nu ook nog een voorbeeld van de volledige code willen bekijken, dan moet je eens kijken in
<a href=src/voorbeeld.lua>voorbeeld.lua</a>.</p><h2 id=conclusie>Conclusie</h2><p>Het spelletje is af en je hebt geleerd hoe je vrij gemakkelijk een 2D shooter kunt maken met Löve.</p><h2 id=vervolg>Vervolg</h2><p>Als je meer wilt maken met Löve, dan zijn er meerdere instructies (in het Engels: tutorials) op het internet te vinden.
Helaas zijn die wel vrijwel allemaal Engelstalig.</p><p>Een overzicht vind je op site van Löve zelf: <a href=https://love2d.org/wiki/Category:Tutorials>https://love2d.org/wiki/Category:Tutorials</a>.</p><div class=section id=licentie><h1>Licentie</h1><p>Deze instructies worden, net als alle andere instructies van CoderDojo Nijmegen,
aangeboden onder een <a class="reference external" href=http://creativecommons.org/licenses/by-nc-sa/4.0/>Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International Licentie</a>.</p><a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/><img alt="Creative Commons License" style=border-width:0 src=/imgs/CreativeCommons.png></a></div></article></main><footer><div id=colofon><div><p>Stichting CoderDojo Nijmegen</p>Honigcomplex | Unit 40<br>Waalbandijk 16<br>6541 AJ Nijmegen<br><br><a href=/privacy>privacybeleid</a></div><div><img src=/imgs/coderdojo-nijmegen-anbi.png alt="ANBI logo"></div><div><p>hosting door:</p><a href=https://github.com/coderdojonijmegen/ target=_blank rel="noopener noreferrer"><img src=/imgs/GitHub_Logo_White.png alt="Hosting door GitHub Pages"></a></div><div><p>gesteund door:</p><a href=http://www.stitpro.nl/ target=_blank rel="noopener noreferrer"><img src=/imgs/stitpro-bw.png alt="Stitpro logo"></a><br><a href=http://ixperium.nl/ target=_blank rel="noopener noreferrer"><img src=/imgs/ixperium-bw.png alt="Ixperium logo"></a></div></div><div class=copyright>CoderDojo Nijmegen &copy; 2020</div><div class=social><a href=https://www.facebook.com/pages/CoderDojo-Nijmegen/400380873445793 target=_blank rel="noopener noreferrer"><img src=/imgs/facebook.png alt=Facebook></a>
<a href=https://twitter.com/CoderDojo024 target=_blank rel="noopener noreferrer"><img src=/imgs/twitter.png alt=Twitter></a>
<a href=https://www.linkedin.com/company/stichting-coderdojo-nijmegen/ target=_blank rel="noopener noreferrer"><img src=/imgs/linkedin.png alt=LinkedIn></a>
<a href=https://www.eventbrite.nl/o/stichting-coderdojo-nijmegen-12043791497 target=_blank rel="noopener noreferrer"><img src=/imgs/eventbrite.png alt=Eventbrite></a>
<a href=https://github.com/coderdojonijmegen target=_blank rel="noopener noreferrer"><img src=/imgs/github.png alt=GitHub></a></div></footer><script src=/js/bundle.js></script></body></html>